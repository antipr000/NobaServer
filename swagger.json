{"openapi":"3.0.0","paths":{"/v1/health":{"get":{"operationId":"appHealth","summary":"Checks if the Noba service is up and running","parameters":[],"responses":{"200":{"description":"Health status of the Noba service"}},"tags":["Health Check"]}},"/v1/cryptocurrencies":{"get":{"operationId":"supportedCryptocurrencies","summary":"Returns a list of all cryptocurrencies supported by Noba Onramp","parameters":[],"responses":{"200":{"description":"List of all supported cryptocurrencies","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CurrencyDTO"}}}}}},"tags":["Assets"]}},"/v1/fiatcurrencies":{"get":{"operationId":"supportedFiatCurrencies","summary":"Returns a list of all fiat currencies supported by Noba Onramp","parameters":[],"responses":{"200":{"description":"List of all supported fiat currencies","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CurrencyDTO"}}}}}},"tags":["Assets"]}},"/v1/auth/verifyotp":{"post":{"operationId":"verifyOtp","summary":"Submits the one-time passcode (OTP) to retreive an API access token","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpRequestDTO"}}}},"responses":{"200":{"description":"API access token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpResponseDTO"}}}},"401":{"description":"Invalid OTP"}},"tags":["Authentication"]}},"/v1/auth/login":{"post":{"operationId":"loginUser","summary":"Logs user in and sends one-time passcode (OTP) to the provided email address","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestDTO"}}}},"responses":{"200":{"description":"Email successfully sent"},"403":{"description":"Account does not exist"}},"tags":["Authentication"]}},"/v1/consumers":{"get":{"operationId":"getConsumer","summary":"Gets details of logged-in consumer","parameters":[],"responses":{"200":{"description":"Details of logged-in consumer","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumerDTO"}}}},"400":{"description":"Invalid request parameters"},"403":{"description":"Logged-in user is not a Consumer"}},"tags":["Consumer"],"security":[{"JWT-auth":[]}]},"patch":{"operationId":"updateConsumer","summary":"Updates details of logged-in consumer","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConsumerRequestDTO"}}}},"responses":{"200":{"description":"Updated consumer record","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumerDTO"}}}},"400":{"description":"Invalid request parameters"},"403":{"description":"Logged-in user is not a Consumer"}},"tags":["Consumer"],"security":[{"JWT-auth":[]}]}},"/v1/consumers/paymentmethods":{"post":{"operationId":"addPaymentMethod","summary":"Adds a payment method for the logged-in consumer","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddPaymentMethodDTO"}}}},"responses":{"201":{"description":"Updated consumer record","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumerDTO"}}}},"400":{"description":"Invalid payment method details"},"403":{"description":"Logged-in user is not a Consumer"}},"tags":["Consumer"],"security":[{"JWT-auth":[]}]}},"/v1/consumers/paymentmethods/{paymentToken}":{"delete":{"operationId":"deletePaymentMethod","summary":"Deletes a payment method for the logged-in consumer","parameters":[{"name":"paymentToken","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Deleted consumer record","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumerDTO"}}}},"400":{"description":"Invalid payment method details"},"403":{"description":"Logged-in user is not a Consumer"}},"tags":["Consumer"],"security":[{"JWT-auth":[]}]}},"/v1/transactions/check":{"get":{"operationId":"checkIfTransactionPossible","summary":"Checks if the transaction parameters are valid","parameters":[{"name":"type","required":true,"in":"query","schema":{"enum":["onramp","offramp","swap"],"type":"string"}},{"name":"transactionAmount","required":true,"in":"query","schema":{"type":"number"}},{"name":"baseCurrency","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckTransactionDTO"}}}}},"security":[{"JWT-auth":[]}],"tags":["Transactions"]}},"/v1/transactions/{transactionID}":{"get":{"operationId":"getTransactionStatus","summary":"Gets details of a transaction","parameters":[{"name":"transactionID","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Details of a transaction","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}},"404":{"description":"Transaction does not exist"}},"security":[{"JWT-auth":[]}],"tags":["Transactions"]}},"/v1/transactions":{"post":{"operationId":"transact","summary":"Submits a new transaction","parameters":[{"name":"sessionKey","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTransactionDTO"}}}},"responses":{"200":{"description":"Transaction details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}},"400":{"description":"Invalid request parameters"}},"security":[{"JWT-auth":[]}],"tags":["Transactions"]},"get":{"operationId":"getTransactions","summary":"Gets all transactions for the logged-in consumer","parameters":[{"name":"startDate","required":true,"in":"query","description":"Format: YYYY-MM-DD, example: 2010-04-27","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","description":"Format: YYYY-MM-DD, example: 2010-04-27","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all transactions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}}},"security":[{"JWT-auth":[]}],"tags":["Transactions"]}},"/v1/consumers/limits":{"get":{"operationId":"getConsumerLimits","summary":"Gets transaction limit details for logged-in consumer","parameters":[],"responses":{"200":{"description":"Consumer limit details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumerLimitsDTO"}}}},"400":{"description":"Invalid request parameters"}},"security":[{"JWT-auth":[]}],"tags":["Consumer"]}},"/v1/transactions/download":{"get":{"operationId":"downloadTransactions","summary":"Downloads all the transactions of a particular consumer","parameters":[{"name":"startDate","required":true,"in":"query","description":"Format: YYYY-MM-DD, example: 2010-04-27","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","description":"Format: YYYY-MM-DD, example: 2010-04-27","schema":{"type":"string"}},{"name":"reportFormat","required":true,"in":"query","description":"Format in which you want the transactions report. Current 'CSV' is supported.","schema":{"enum":["csv","pdf"],"type":"string"}}],"responses":{"200":{"description":"A CSV or PDF file containing details of all the transactions made by the consumer","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}}},"security":[{"JWT-auth":[]}],"tags":["Transactions"]}},"/v1/exchangerates/priceinfiat/{fiatCurrencyCode}":{"get":{"operationId":"priceInFiat","summary":"Gets price of a crypto (leg1) in fiat (leg 2)","parameters":[{"name":"fiatCurrencyCode","required":true,"in":"path","schema":{"type":"string"}},{"name":"cryptoCurrencyCode","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Fiat price (leg 2) for the desired crypto currency (leg1)"},"400":{"description":"Invalid currency code (fiat or crypto)"},"503":{"description":"Unable to connect to underlying service provider"}},"tags":["Assets"]}},"/v1/exchangerates/processingfee/{fiatCurrencyCode}":{"get":{"operationId":"processingFee","summary":"Gets the processing fee for a crypto fiat conversion","parameters":[{"name":"fiatCurrencyCode","required":true,"in":"path","schema":{"type":"string"}},{"name":"fiatAmount","required":true,"in":"query","schema":{"type":"number"}},{"name":"cryptoCurrencyCode","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Processing fee for given crypto fiat conversion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessingFeeDTO"}}}},"400":{"description":"Invalid currency code (fiat or crypto)"},"503":{"description":"Unable to connect to underlying service provider"}},"tags":["Assets"]}}},"info":{"title":"Noba Server","description":"Noba Server API (DEVELOPMENT)","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"https://api.noba.com/"}],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CurrencyDTO":{"type":"object","properties":{"_id":{"type":"string"},"type":{"type":"string","enum":["fiat","crypto"]},"name":{"type":"string"},"ticker":{"type":"string"},"iconPath":{"type":"string"}},"required":["_id","type","name","ticker","iconPath"]},"VerifyOtpRequestDTO":{"type":"object","properties":{"emailOrPhone":{"type":"string"},"otp":{"type":"number"},"identityType":{"type":"string","enum":["CONSUMER","PARTNER_ADMIN","NOBA_ADMIN"]},"partnerID":{"type":"string"}},"required":["emailOrPhone","otp","identityType"]},"VerifyOtpResponseDTO":{"type":"object","properties":{"access_token":{"type":"string"},"user_id":{"type":"string"}},"required":["access_token","user_id"]},"LoginRequestDTO":{"type":"object","properties":{"email":{"type":"string"},"identityType":{"type":"string","enum":["CONSUMER","PARTNER_ADMIN","NOBA_ADMIN"]},"partnerID":{"type":"string"}},"required":["email","identityType"]},"KycVerificationDTO":{"type":"object","properties":{"kycVerificationStatus":{"type":"string","enum":["Pending-New","Pending-KYCSubmitted","Pending-KYCApproved","Pending-Flagged-KYC","Pending-Flagged-Fraud","Pending-Flagged-Wallet","Approved","NotApproved-Rejected-KYC","NotApproved-Rejected-Fraud","NotApproved-Rejected-Wallet"]},"updatedAt":{"type":"number"}}},"DocumentVerificationDTO":{"type":"object","properties":{"documentVerificationStatus":{"type":"string","enum":["NotSubmitted","NotRequired","Pending","Verified","Rejected","LivePhotoVerified"]},"updatedAt":{"type":"number"}}},"PaymentMethodsDTO":{"type":"object","properties":{"cardName":{"type":"string"},"cardType":{"type":"string"},"imageUri":{"type":"string"},"paymentToken":{"type":"string"},"first6Digits":{"type":"string"},"last4Digits":{"type":"string"}},"required":["paymentToken","first6Digits","last4Digits"]},"CryptoWalletsDTO":{"type":"object","properties":{"address":{"type":"string"},"chainType":{"type":"string"},"isEVMCompatible":{"type":"boolean"},"status":{"type":"string"}},"required":["address","chainType","isEVMCompatible","status"]},"ConsumerDTO":{"type":"object","properties":{"_id":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"kycVerificationData":{"$ref":"#/components/schemas/KycVerificationDTO"},"documentVerificationData":{"$ref":"#/components/schemas/DocumentVerificationDTO"},"phone":{"type":"string"},"dateOfBirth":{"type":"string"},"address":{"type":"object"},"paymentMethods":{"type":"array","items":{"$ref":"#/components/schemas/PaymentMethodsDTO"}},"cryptoWallets":{"type":"array","items":{"$ref":"#/components/schemas/CryptoWalletsDTO"}}},"required":["_id","email","kycVerificationData","documentVerificationData"]},"UpdateConsumerRequestDTO":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"address":{"type":"object"},"dateOfBirth":{"type":"string"}}},"AddPaymentMethodDTO":{"type":"object","properties":{"cardName":{"type":"string"},"cardNumber":{"type":"string"},"expiryMonth":{"type":"number"},"expiryYear":{"type":"number"},"cvv":{"type":"string"},"imageUri":{"type":"string"}},"required":["cardNumber","expiryMonth","expiryYear","cvv"]},"CheckTransactionDTO":{"type":"object","properties":{"status":{"type":"string","enum":["ALLOWED","TRANSACTION_TOO_SMALL","TRANSACTION_TOO_LARGE","TRANSACTION_LIMIT_REACHED","DAILY_LIMIT_REACHED","WEEKLY_LIMIT_REACHED","MONTHLY_LIMIT_REACHED","MAX_LIMIT_REACHED"]},"rangeMin":{"type":"number"},"rangeMax":{"type":"number"}},"required":["status","rangeMin","rangeMax"]},"TransactionDTO":{"type":"object","properties":{"_id":{"type":"string"},"userID":{"type":"string"},"status":{"type":"string","enum":["INITIATED","FIAT_INCOMING_PENDING","FIAT_INCOMING_CONFIRMED","FIAT_INCOMING_FAILED","FIAT_INCOMING_REVERSED","FIAT_OUTGOING_PENDING","FIAT_OUTGOING_CONFIRMED","FIAT_OUTGOING_FAILED","WALLET_INCOMING_PENDING","WALLET_INCOMING_COMPLETED","WALLET_INCOMING_FAILED","WALLET_OUTGOING_PENDING","WALLET_OUTGOING_COMPLETED","WALLET_OUTGOING_FAILED","COMPLETED"]},"type":{"type":"string","enum":["onramp","offramp","swap"]},"statusMessage":{"type":"string"},"leg1":{"type":"string"},"leg2":{"type":"string"},"baseAmount":{"type":"number","description":"Amount to be exchaged. in case of offramp it is amount of fiat currency, offramp amount of crypto, in case of swap the source currency etc."},"leg1Amount":{"type":"number"},"leg2Amount":{"type":"number"},"transactionTimestamp":{"format":"date-time","type":"string"},"paymentMethodID":{"type":"string"},"fiatTransactionID":{"type":"string"},"cryptoTransactionID":{"type":"string"},"destinationWalletAddress":{"type":"string","description":"Destination wallet address to transfer crypto to in case of off ramp transaction"}},"required":["_id","userID","status","type","leg1","leg2","baseAmount","leg1Amount","leg2Amount","transactionTimestamp"]},"CreateTransactionDTO":{"type":"object","properties":{"paymentToken":{"type":"string"},"type":{"type":"string","enum":["onramp","offramp","swap"]},"leg1":{"type":"string"},"leg2":{"type":"string"},"leg1Amount":{"type":"number"},"leg2Amount":{"type":"number"},"destinationWalletAddress":{"type":"string"}},"required":["paymentToken","type","leg1","leg2","leg1Amount","leg2Amount"]},"PeriodLimit":{"type":"object","properties":{"max":{"type":"number"},"used":{"type":"number"},"period":{"type":"number"}},"required":["max","used","period"]},"ConsumerLimitsDTO":{"type":"object","properties":{"minTransaction":{"type":"number"},"maxTransaction":{"type":"number"},"monthly":{"$ref":"#/components/schemas/PeriodLimit"},"weekly":{"$ref":"#/components/schemas/PeriodLimit"},"daily":{"$ref":"#/components/schemas/PeriodLimit"}},"required":["minTransaction","maxTransaction","monthly"]},"ProcessingFeeDTO":{"type":"object","properties":{"processingPercentFee":{"type":"number"},"transactionPercentFee":{"type":"number"}},"required":["processingPercentFee","transactionPercentFee"]}}}}